import{r as e,a as n,S as i,o as t,P as o,F as s,H as a,D as r,G as d,W as l,s as c,A as u,L as p,T as w,b as A,V as g,c as v,d as f,e as h,f as m,n as y,u as U,t as E,g as S,C as I,h as B,i as k}from"./vendor.41762f19.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)})).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?n.credentials="include":"anonymous"===e.crossorigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const x=e=>{var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=decodeURI(window.location.search.substr(1)).match(n);return null!=i?unescape(i[2]):""};const C={id:"box"},H=["poster","src"],R=["src"],b={class:"text currency"},J=["src"],K={setup(B){x("id");const k=x("token"),K=x("tokenType");let F={"Content-Type":"application/json;charset=UTF-8"};F[K]=k;const N=e(null),G=e(null),Z=e({id:1,picUrl:null,videoUrl:"https://ciligongfang.oss-cn-chengdu.aliyuncs.com/6ce129574c06470399e2b5542be64ab9.mp4",createTime:null,textUrl:"刺梨饮料灌身",labelName:"刺梨饮料灌身"}),Q=n({isLopo:!1,opty:!1});let T,W,D,X,j,O,P,L,Y=!0,q={};const z=new i,V=e(0),M=e(null);t((()=>{const e=document.getElementById("app");V.value=window.innerHeight-e.offsetHeight+"px";document.getElementById("canvasDiv").addEventListener("click",ie);const n=+(window.innerWidth/1.7).toFixed(0);M.value=Z.value.videoUrl+`?x-oss-process=video/snapshot,t_50000,f_jpg,w_${window.innerWidth},h_${n}`,(async()=>{const e=await S.get("/api/ar/arResources/details?id=1",{},{headers:F});Z.value=e.data})()}));const _=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],$=["Jump","Yes","No","Wave","Punch","ThumbsUp"];function ee(){O.aspect=window.innerWidth/window.innerHeight,O.updateProjectionMatrix(),P.setSize(window.innerWidth,window.innerHeight)}function ne(){const e=W.getDelta();D&&D.update(e),requestAnimationFrame(ne),P.render(z,O)}!async function(){const e=document.createElement("div");e.id="canvasDiv",T=e,document.body.appendChild(T),O=new o(45,window.innerWidth/window.innerHeight,.25,100),z.fog=new s(14737632,20,100),W=new I;const n=new a(16777215,4473924);n.position.set(0,20,0),z.add(n);const i=new r(16777215);i.position.set(0,20,10),z.add(i);const t=new d;await t.load("https://miniapplet.ciligf.com/ar/resource/lib/RobotExpressive.glb",(function(e){L=e.scene,L.name="myGltf",L.scale.set(.5,.5,.5),z.add(L),function(e,n){D=new u(e);for(let o=0;o<n.length;o++){const e=n[o],i=D.clipAction(e);q[e.name]=i,($.indexOf(e.name)>=0||_.indexOf(e.name)>=4)&&(i.clampWhenFinished=!0,i.loop=p)}X=q.Punch,i="Walking",t=.2,j=X,X=q[i],j.fadeOut(t),X.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(t).play();var i,t}(L,e.animations),function(){var e=new w(O,P.domElement);z.add(e);var n=[];n.push(L);var i=new A(n,O,P.domElement);i.transformGroup=!0,i.addEventListener("hoveron",(()=>{Y=!1})),i.addEventListener("hoveroff",(()=>{Y=!0}))}()}),void 0,(function(e){console.error(e)})),P=new l({alpha:!0}),P.setPixelRatio(window.devicePixelRatio),P.setSize(window.innerWidth,window.innerHeight),P.outputEncoding=c,T.appendChild(P.domElement),window.addEventListener("resize",ee),ne()}(),O.position.set(-1,.5,10),O.lookAt(new g(-1,.5,0));const ie=()=>{if(!Y)return;const e=N.value;e&&(e.paused?(e.play(),Q.isLopo=!0,setTimeout((()=>{Q.opty=!0}),1500)):(e.pause(),Q.isLopo=!1,Q.opty=!1))};return window.addEventListener("resize",(()=>{O.aspect=window.innerWidth/window.innerHeight,O.updateProjectionMatrix(),P.setSize(window.innerWidth,window.innerHeight)})),(e,n)=>(v(),f("div",C,[Z.value.videoUrl&&M.value?(v(),f("video",{key:0,class:"video currency",poster:M.value,src:Z.value.videoUrl,ref:(e,n)=>{n.myVideo=e,N.value=e}},null,8,H)):h("",!0),Z.value.picUrl?(v(),f("img",{key:1,class:"img currency",src:Z.value.picUrl,alt:""},null,8,R)):h("",!0),m("img",{onClick:n[0]||(n[0]=(...n)=>e.stop&&e.stop(...n)),class:y(["music",{lopo:U(Q).isLopo,opty:U(Q).opty}]),src:"data:image/png;base64,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"},null,2),m("div",b,E(Z.value.textUrl),1),!Z.value.videoUrl&&Z.value.audioUrl?(v(),f("audio",{key:2,class:"currency",src:Z.value.audioUrl,ref:(e,n)=>{n.myAudio=e,G.value=e}},null,8,J)):h("",!0)]))}};k({setup:e=>(e,n)=>(v(),B(K))}).mount("#app");
